<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="plone">

<body>
  <metal:content-core fill-slot="content-core">
    <metal:block define-macro="content-core"
                 tal:define="content_type context/get_content_type|context/Format;">
      <p>
        <metal:field use-macro="python:context.widget('file', mode='view')">
        File
        </metal:field>
      </p>

      <div tal:condition="python: content_type.startswith('text') and context.get_size() > 0">
        <h2 i18n:translate="heading_file_contents">File contents</h2>
        <pre tal:content="context/get_data|context/data|nothing">
        </pre>
      </div>

      <div class="wowbook"
           tal:define="show request/show|string:wowbook;
                       is_wowbook python:show == 'wowbook';
                       target python:'wowbook' if is_wowbook else 'documentviewer#document/p1';
                       height python:'800' if is_wowbook else '990';"
           tal:condition="context/@@wowbook/enabled">
        <a tal:attributes="href string:${context/absolute_url}/view?show=wowbook"
           tal:condition="not:is_wowbook">wowbook</a>
        <a tal:attributes="href string:${context/absolute_url}/view?show=documentviewer"
           tal:condition="is_wowbook">documentviewer</a>
        <style>#viewer { ; }</style>
        <iframe id="viewer" style="width: 100%;"
                tal:attributes="src string:${context/absolute_url}/${target};
                                height height"/>
      </div>

    </metal:block>
  </metal:content-core>
</body>

</html>
